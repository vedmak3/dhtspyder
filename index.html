<html>
    <head>
        <link href="https://unpkg.com/tabulator-tables@5.4.0/dist/css/tabulator.css" rel="stylesheet">
        <script type="text/javascript" src="https://unpkg.com/tabulator-tables@5.4.0/dist/js/tabulator.js"></script>
    </head>
    <body>
        <div id="example-table"></div>
        <script>
            let a=window.location.href
            let fr=a.split('//')
            let socket = new WebSocket("ws://"+fr[1]+"ws");
            socket.onopen = function(e) {
                 alert("[open] Соединение установлено");
            };
            socket.onmessage = function(event) {
                let vr=JSON.parse(event.data)
                table.addData(vr)
            };

 var table = new Tabulator("#example-table", {
    layout:"fitData",
    columns:[
    {title:"Magnet", field:"Hash",formatter:"link", formatterParams:{
    labelField:"Hash",
    urlPrefix:"magnet:?xt=urn:btih:",
    target:"_blank",
}},
    {title:"время", field:"Time"},
    {title:"вес", field:"Weight"},
    {title:"название", field:"Name"},
    ],
});
            
            fetch('./data.json')
                .then(res => res.json())
                .then(rez => {
                    table.setData(rez);
                });
    
        </script>
    </body>
</html>


